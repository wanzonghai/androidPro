System.register("chunks:///_virtual/GameDataManager.ts",["cc"],(function(t){"use strict";var s;return{setters:[function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"5cce7FfQNtB3pK/D8xh4rnR","GameDataManager",void 0);class i{constructor(){this.mainLayerScript=null,this.isPause=!1,this.curSoundIsClose=!0,this.curGameIsRun=!1,this.isAllowClear=!0,this.itemIsRun=!1,this.curUserCoin=0,this.timerMaxNum=10,this.curTimeNum=10,this.curTimeFunc=null,this.curWinNum=0,this.itemMult={1:2,2:4,3:6,4:8,5:10,6:12},this.betList=[1,2,4,8,16,32,64],this.curBetIndex=0}}i.instance=new i;t("default",i.instance);s._RF.pop()}}}));

System.register("chunks:///_virtual/LoginLayer.ts",["cc"],(function(e){"use strict";var r,t,c,n;return{setters:[function(e){r=e.cclegacy,t=e.Component,c=e.director,n=e._decorator}],execute:function(){var o;r._RF.push({},"3edc9YGArREDoqN1NGNWo9r","LoginLayer",void 0);const{ccclass:a,property:s}=n;e("LoginLayer",a("LoginLayer")(o=class extends t{start(){}update(e){}openMainLayer(){c.loadScene("mainLayer")}})||o);r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./GameDataManager.ts","./LoginLayer.ts","./PlayManager.ts","./mainLayer.ts","./util.ts"],(function(){"use strict";return{setters:[null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/mainLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameDataManager.ts","./PlayManager.ts"],(function(e){"use strict";var t,n,i,a,o,s,r,u,p,l,h,c,m,d,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Node,o=e.AudioClip,s=e._decorator,r=e.Component,u=e.UITransform,p=e.find,l=e.AudioSource,h=e.director,c=e.Animation,m=e.Label},function(e){d=e.default},function(e){y=e.PlayManager}],execute:function(){var C,g,N,v,f,b,S,T,w,W,O,I,M,L,G,k,B;i._RF.push({},"13914E7QpBDVpV6GZmZJFw2","mainLayer",void 0);const{ccclass:E,property:F}=s;e("mainLayer",(C=E("mainLayer"),g=F({type:a,tooltip:"规则展示节点"}),N=F({type:a,tooltip:"用户余额展示"}),v=F({type:a,tooltip:"当前局赢钱展示"}),f=F({type:a,tooltip:"进度条遮罩"}),b=F({type:a,tooltip:"结束展示节点"}),S=F({type:y,tooltip:"游玩区域控制脚本"}),T=F({type:[o],tooltip:"元素纹理"}),C((O=t((W=class extends r{constructor(...e){super(...e),n(this,"helpNode",O,this),n(this,"userCoinNode",I,this),n(this,"curWinNumNode",M,this),n(this,"progressMask",L,this),n(this,"winNode",G,this),n(this,"playManager",k,this),n(this,"audios",B,this),this.maskWidth=0}start(){this.maskWidth=this.progressMask.getComponent(u).width,d.mainLayerScript=this,this.updateUserCoin()}update(e){}btnEvent(e){switch(e.target.name){case"playBtn":this.playGame();break;case"stopBtn":this.pauseGame();break;case"returnBtn":this.exitGame();break;case"soundBtn":this.openOrCloseSound();break;case"helpBtn":this.openHelpLayer();break;case"closeHelpBtn":this.closeHelpLayer()}}exitGame(){p("Canvas").getComponent(l).playOneShot(this.audios[2]),d.curGameIsRun=!1,d.curTimeNum=d.timerMaxNum,h.loadScene("loginLayer")}openHelpLayer(){p("Canvas").getComponent(l).playOneShot(this.audios[2]),this.helpNode.active=!0,this.helpNode.getComponent(c).play("helpOpen")}closeHelpLayer(){p("Canvas").getComponent(l).playOneShot(this.audios[2]),this.helpNode.getComponent(c).play("helpClose"),this.helpNode.getComponent(c).on(c.EventType.FINISHED,(()=>{this.helpNode.getComponent(c).off(c.EventType.FINISHED),this.helpNode.active=!1}))}openOrCloseSound(){p("Canvas").getComponent(l).playOneShot(this.audios[2]),d.curSoundIsClose?p("Canvas").getComponent(l).volume=0:p("Canvas").getComponent(l).volume=1,d.curSoundIsClose=!d.curSoundIsClose}playGame(){p("Canvas").getComponent(l).playOneShot(this.audios[2]),d.curGameIsRun||(p("Canvas").getComponent(l).playOneShot(this.audios[3]),d.curGameIsRun=!0,this.playManager.startGame(),this.startBar())}pauseGame(){p("Canvas").getComponent(l).playOneShot(this.audios[2]),d.curGameIsRun&&(d.isPause=!d.isPause,d.isPause?(this.playManager.pauseGame(),this.unschedule(d.curTimeFunc)):(p("Canvas").getComponent(l).playOneShot(this.audios[3]),this.startBar(),this.playManager.recoverGaem()))}updateUserCoin(){this.userCoinNode.getComponent(m).string=d.curUserCoin+""}updateCurWinNum(){this.curWinNumNode.getComponent(m).string=d.curWinNum>0?d.curWinNum+"":""}showEnd(){let e=this.winNode.getChildByName("mask"),t=this.winNode.getChildByName("win"),n=this.winNode.getChildByName("lose"),i=d.curWinNum>0?t:n,o=d.curWinNum>0?"winNodeOpen":"loseNodeOpen";d.curWinNum>0?p("Canvas").getComponent(l).playOneShot(this.audios[0]):p("Canvas").getComponent(l).playOneShot(this.audios[1]),this.unschedule(d.curTimeFunc),d.curTimeNum=d.timerMaxNum,this.updateProgress(),this.winNode.active=!0,t.active=d.curWinNum>0,n.active=d.curWinNum<=0,p("Canvas").getComponent(l).playOneShot(d.curWinNum>0?this.audios[0]:this.audios[1]),i.getComponent(c).play(o),i.getComponent(c).on(c.EventType.FINISHED,(()=>{i.getComponent(c).off(c.EventType.FINISHED),this.updateUserCoin(),this.updateCurWinNum(),e.on(a.EventType.TOUCH_START,this.closeWinLayer),this.scheduleOnce(this.closeWinLayer,2)}))}closeWinLayer(){this.winNode.getChildByName("mask").off(a.EventType.TOUCH_START),this.unschedule(this.closeWinLayer),d.curWinNum=0,this.winNode.active=!1,d.curGameIsRun=!1}startBar(){d.curTimeFunc=()=>{d.curTimeNum-=.01,d.curTimeNum<=0&&(d.curTimeNum=d.timerMaxNum,this.unschedule(d.curTimeFunc),d.mainLayerScript.showEnd(),console.log("失败"),this.playManager.resetItemParentPos()),this.updateProgress()},this.schedule(d.curTimeFunc,.01)}updateProgress(){this.progressMask.getComponent(u).width=this.maskWidth*(d.curTimeNum/d.timerMaxNum)}}).prototype,"helpNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(W.prototype,"userCoinNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(W.prototype,"curWinNumNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(W.prototype,"progressMask",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(W.prototype,"winNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(W.prototype,"playManager",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(W.prototype,"audios",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=W))||w));i._RF.pop()}}}));

System.register("chunks:///_virtual/PlayManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameDataManager.ts","./util.ts"],(function(t){"use strict";var e,i,s,r,o,n,h,m,a,l,c,u,d,p,g,I,P,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){s=t.cclegacy,r=t.SpriteFrame,o=t.Node,n=t._decorator,h=t.Component,m=t.size,a=t.v3,l=t.Sprite,c=t.tween,u=t.v2,d=t.find,p=t.AudioSource,g=t.color,I=t.UITransform},function(t){P=t.default},function(t){f=t.default}],execute:function(){var S,N,v,y,C,w,E,x,T,b,F;s._RF.push({},"18ff12XdqtI3boRW+apd4PJ","PlayManager",void 0);const{ccclass:L,property:M}=n;t("PlayManager",(S=L("PlayManager"),N=M({type:[r],tooltip:"元素纹理"}),v=M({type:o,tooltip:"元素父节点"}),y=M({type:o,tooltip:"移动事件接收节点"}),C=M({type:o,tooltip:"暂存位置元素节点"}),S((x=e((E=class extends h{constructor(...t){super(...t),i(this,"itemSpriteFrameList",x,this),i(this,"itemParent",T,this),i(this,"moveNode",b,this),i(this,"registerItemNode",F,this),this.rowNum=6,this.colNum=6,this.itemSize=m(0,0),this.itemScale=1,this.itemIntervalX=13,this.itemIntervalY=13,this.itemStartPos=0,this.AllowRegisterItmeMove=!1,this.item1=null,this.item2=null}start(){for(let t=0;t<this.itemSpriteFrameList.length;t++)this.itemSpriteFrameList[t].width>this.itemSize.width&&(this.itemSize.width=this.itemSpriteFrameList[t].width),this.itemSpriteFrameList[t].height>this.itemSize.height&&(this.itemSize.height=this.itemSpriteFrameList[t].height);this.itemParent.startPos=a(this.itemParent.position.x,this.itemParent.position.y),this.creatorItemNode()}creatorItemNode(){for(let t=0;t<this.rowNum*this.colNum;t++){let e=new o;e.addComponent(l);let i=Math.floor(t/this.colNum),s=t%this.colNum,r=this.itemSize.width*this.itemScale,n=this.itemSize.height*this.itemScale;e.scale=a(this.itemScale,this.itemScale,this.itemScale),e.curIndex=t,this.itemParent.addChild(e),e.position=a(r/2+s*r+s*this.itemIntervalX,n/2+i*n+i*this.itemIntervalY),e.on(o.EventType.TOUCH_END,(()=>{P.isAllowClear&&P.curGameIsRun&&!P.isPause&&this.itemNearClear(e)}))}}initGameData(){let t=!1;for(let e=0;e<this.rowNum*this.colNum;e++){let i=this.itemParent.children[e],s=(Math.floor(e/this.colNum),this.colNum,f.getRandom(0,this.itemSpriteFrameList.length-1)+1);i.itemId=s,i.getComponent(l).spriteFrame=this.itemSpriteFrameList[s-1],i.on(o.EventType.TOUCH_START,(t=>{P.curGameIsRun&&(this.AllowRegisterItmeMove=!0,c(i).to(.15,{scale:a(this.itemScale-.1,this.itemScale-.1,this.itemScale-.1)}).to(.15,{scale:a(this.itemScale+.1,this.itemScale+.1,this.itemScale+.1)}).to(.2,{scale:a(this.itemScale,this.itemScale,this.itemScale)}).start(),c(this.registerItemNode).to(.15,{scale:a(this.itemScale-.1,this.itemScale-.1,this.itemScale-.1)}).to(.15,{scale:a(this.itemScale+.1,this.itemScale+.1,this.itemScale+.1)}).to(.2,{scale:a(this.itemScale,this.itemScale,this.itemScale)}).start(),i.active=!1,this.item1=i,this.moveNode.startPos=u(i.position.x,i.position.y),this.setRegisterItem(i.itemId,a(i.position.x,i.position.y)))})),t||(t=!0,this.moveNode.off(o.EventType.TOUCH_START),this.moveNode.off(o.EventType.TOUCH_MOVE),this.moveNode.off(o.EventType.TOUCH_END),this.moveNode.on(o.EventType.TOUCH_START,(t=>{this.registerItemNode.active=!0,t.preventSwallow=!0})),this.moveNode.on(o.EventType.TOUCH_MOVE,(t=>{if(!this.AllowRegisterItmeMove||!P.curGameIsRun)return;t.getLocation();let e=t.getDeltaX(),i=t.getDeltaY(),s=this.registerItemNode.position.x,r=this.registerItemNode.position.y;console.log("offsetX:",s+e),console.log("offsetY:",r+i),this.registerItemNode.position=a(s+e,r+i)})),this.moveNode.on(o.EventType.TOUCH_END,(()=>{if(!P.curGameIsRun)return;let t=this.registerIsExistItemTop();if(this.item1.active=!0,this.registerItemNode.active=!1,this.AllowRegisterItmeMove=!1,t>-1){let e=this.itemParent.children[this.item1.curIndex],i=this.itemParent.children[t],s=e.itemId,r=i.itemId;e.itemId=r,e.getComponent(l).spriteFrame=this.itemSpriteFrameList[r-1],i.itemId=s,i.getComponent(l).spriteFrame=this.itemSpriteFrameList[s-1];let o=this.getContinuousItemList();if(o.length>0){let t=0;for(let t=0;t<o.length;t++){let e=o[t].obj,i=o[t].index;this.itemParent.children[i],e.itemId=-1,e.active=!1}this.itemParent.children.forEach((e=>{e&&e.itemId>-1&&t++})),t<=10&&(P.curWinNum+=100,P.curUserCoin+=100,P.mainLayerScript.showEnd(),console.log("胜利"),this.resetItemParentPos())}}})))}}setRegisterItem(t,e){this.registerItemNode.itemId=t,this.registerItemNode.position=e,this.registerItemNode.getComponent(l).spriteFrame=this.itemSpriteFrameList[t-1]}registerIsExistItemTop(){let t=-1,e=this.registerItemNode.getWorldPosition();return this.itemParent.children.forEach(((i,s)=>{if(!i||-1==i.itemId)return;let r=i.getWorldPosition();e.x>r.x-this.itemSize.width/2&&e.x<r.x+this.itemSize.width/2&&e.y>r.y-this.itemSize.height/2&&e.y<r.y+this.itemSize.height/2&&(t=s)})),t}getContinuousItemList(){for(let t=0;t<this.rowNum;t++){let e=t,i=[],s=[];if(this.itemParent.children.forEach(((t,s)=>{let r=Math.floor(s/this.colNum);e==r&&i.push({obj:t,index:s})})),s=this.checkArrayContinuous(i),s.length>=4)return s}for(let t=0;t<this.colNum;t++){let e=t,i=[],s=[];if(this.itemParent.children.forEach(((t,s)=>{let r=s%this.colNum;e==r&&i.push({obj:t,index:s})})),s=this.checkArrayContinuous(i),s.length>=4)return s}return[]}checkArrayContinuous(t){let e=0,i=[];for(let s=0;s<t.length;s++){let r=t[s];if(0==e||r.obj&&e==r.obj.itemId&&-1!=r.obj.itemId?e=r.obj?r.obj.itemId:-1:(e=0,i=[]),i.push(r),i.length>=4)return i}return[]}startGame(){this.initGameData()}pauseGame(){this.unschedule(this.moveItemFunc),console.log("暂停游戏")}recoverGaem(){this.startMoveItemParentPos()}itemNearClear(t){let e=t.curIndex,i=(Math.floor(e/this.colNum),this.colNum,[e]),s=t.itemId,r=t=>{let e=t.curIndex,o=Math.floor(e/this.colNum),n=e%this.colNum,h=(o-1)*this.colNum+n,m=(o+1)*this.colNum+n,a=o*this.colNum+n-1,l=o*this.colNum+n+1,c=h%this.colNum,u=m%this.colNum,d=Math.floor(a/this.colNum),p=Math.floor(l/this.colNum);this.itemParent.children[h]&&this.itemParent.children[h].itemId==s&&-1==i.indexOf(h)&&c==n&&(i.push(h),r(this.itemParent.children[h])),this.itemParent.children[m]&&this.itemParent.children[m].itemId==s&&-1==i.indexOf(m)&&u==n&&(i.push(m),r(this.itemParent.children[m])),this.itemParent.children[a]&&this.itemParent.children[a].itemId==s&&-1==i.indexOf(a)&&d==o&&(i.push(a),r(this.itemParent.children[a])),this.itemParent.children[l]&&this.itemParent.children[l].itemId==s&&-1==i.indexOf(l)&&p==o&&(i.push(l),r(this.itemParent.children[l]))};if(r(t),console.log("当前连续节点：",i),i.length>=3){let t=0;d("Canvas").getComponent(p).playOneShot(P.mainLayerScript.audios[5]),P.isAllowClear=!1,i.forEach((e=>{let i=this.itemParent.children[e];t+=2,c(i).by(.2,{scale:a(.1,.1,.1)}).call((()=>{if(i.scale=a(i.scale.x-.1,i.scale.z-.1,i.scale.z-.1),0==--t){let t=!0;this.itemParent.children.forEach((e=>{e.itemId>0&&(t=!1)})),t?(P.curWinNum+=100,P.curUserCoin+=100,P.mainLayerScript.showEnd(),console.log("胜利"),this.resetItemParentPos()):P.isAllowClear=!0}})).start(),c(i.getComponent(l).color).to(.2,{a:0}).call((()=>{if(i.active=!1,i.itemId=0,i.getComponent(l).color=g(255,255,255,255),0==--t){let t=!0;this.itemParent.children.forEach((e=>{e.itemId>0&&(t=!1)})),t?(P.curWinNum+=100,P.curUserCoin+=100,P.mainLayerScript.showEnd(),console.log("胜利"),this.resetItemParentPos()):P.isAllowClear=!0}})).start()}))}}resetItemParentPos(){this.itemParent.position=a(this.itemParent.startPos.x,this.itemParent.startPos.y),this.itemParent.children.forEach((t=>{t.active=!0}))}startMoveItemParentPos(){this.schedule(this.moveItemFunc,3)}moveItemFunc(){this.itemParent.position=a(this.itemParent.position.x,this.itemParent.position.y-93.5),this.isItemParentExceed()&&(this.unschedule(this.moveItemFunc),P.mainLayerScript.showEnd(),console.log("失败"),this.resetItemParentPos())}isItemParentExceed(){let t=!1;return this.itemParent.children.forEach((e=>{if(t)return;let i=this.itemParent.getParent().getWorldPosition();e.getWorldPosition().y<i.y-this.itemParent.getParent().getComponent(I).height/2&&e.itemId>0&&(t=!0)})),t}update(t){}}).prototype,"itemSpriteFrameList",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=e(E.prototype,"itemParent",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(E.prototype,"moveNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(E.prototype,"registerItemNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=E))||w));s._RF.pop()}}}));

System.register("chunks:///_virtual/util.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"249ffab8lhKRJIBMI0QumbQ","util",void 0);class n{getRandom(t,e){return Math.floor(Math.random()*(e-t+1)+t)}}n.instance=new n;t("default",n.instance);e._RF.pop()}}}));
